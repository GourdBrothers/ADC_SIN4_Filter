###################################################
#工具链定义处
###################################################
TOOLCHAIN_DIR = C:/Program Files (x86)/Chipsea/CSU-IDE V4.0.9/chipsea/tools/Compiler/ASM
ASM	   				= "$(TOOLCHAIN_DIR)\csua.exe"
RM	   				= del /F 1>NUL 2>NUL
ECHO					= @echo //-----------------------------------------------------------------------



###################################################
#编译选项定义处
###################################################
OUTPUT_DIR            = C:\Users\XCWK_XL\Desktop\Demo_Code_同事\1186_Adc_Test\.\Release
SOURCE_MAIN_FILE_NAME = 1186_Adc_Test
SOURCE_MAIN_FILE_PATH = C:\Users\XCWK_XL\Desktop\Demo_Code_同事\1186_Adc_Test\/
GENERATE_DAT_FILE			= 1
BODY_NAME							= CSU8RP1186
INST_TYPE							= 0
ROM_WIDTH							= 16
ROM_SPACE						  = 4095
APPEND_ROM_SIZE				= 0
LIMIT_SPACE						= 4095
ASM_LANGUAGE					= eng
FILL_DATA_VALUE				= 0xff
CODE_OPTION						= 0x1000:0x0001
ASM_INCLUDE_PATH			= %%AsmIncludePath%%
UNIT_COMPILER_ASM_FILE= 
CX_COMPILER_OPTION		= -debug 1
ASM_OPTION						= 
LINKER_OPTION					= -fill 1
#LINKER_OPTION				= -fill $(FILL_DATA_VALUE) -cop $(CODE_OPTION)



###################################################
#编译单一文件处
###################################################
compile_unit_asm_file : "$(UNIT_COMPILER_ASM_FILE)"
	$(ASM) -file "$(UNIT_COMPILER_ASM_FILE)" -spath "$(SOURCE_MAIN_FILE_PATH)/" -opath "$(OUTPUT_DIR)/" -chipn $(BODY_NAME) -inst $(INST_TYPE) -romb $(ROM_WIDTH) -space $(ROM_SPACE) -aspace $(APPEND_ROM_SIZE) -limitspace $(LIMIT_SPACE) -lang $(ASM_LANGUAGE) $(CX_COMPILER_OPTION) $(LINKER_OPTION) -cop $(CODE_OPTION)
	$(ECHO)



###################################################
#命令定义处
###################################################
.PHONY : build
build  : outputdir binfile

.PHONY : rebuild
rebuild: outputdir clean build

.PHONY : clean
clean :
	$(RM)  "$(OUTPUT_DIR)\$(SOURCE_MAIN_FILE_NAME).hex"
	$(RM)  "$(OUTPUT_DIR)\*.obj"
	$(RM)  "$(OUTPUT_DIR)\*.dat"
	$(RM)  "$(OUTPUT_DIR)\*.txt"
	$(RM)  "$(OUTPUT_DIR)\*.sbms"
	$(ECHO)

outputdir:
	if not exist "$(OUTPUT_DIR)\$(NULL)" mkdir "$(OUTPUT_DIR)"
	$(ECHO)
	
binfile: 
	$(ASM) -file "$(SOURCE_MAIN_FILE_NAME)" -spath "$(SOURCE_MAIN_FILE_PATH)/" -opath "$(OUTPUT_DIR)/" -chipn $(BODY_NAME) -inst $(INST_TYPE) -romb $(ROM_WIDTH) -space $(ROM_SPACE) -aspace $(APPEND_ROM_SIZE) -limitspace $(LIMIT_SPACE) -lang $(ASM_LANGUAGE) $(CX_COMPILER_OPTION) $(LINKER_OPTION) -cop $(CODE_OPTION)
	$(ECHO)
		
.PHONY : compile
compile : compile_unit_asm_file

